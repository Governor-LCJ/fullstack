<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>countBy</title>
</head>

<body>

  <script src="https://cdn.bootcss.com/lodash.js/4.17.15/lodash.min.js"></script>
  <script>
    // console.log(_.countBy([5.4, 5.6, 5.1, 7], Math.floor))

    // let obj = {};
    // function myCountBy(arr, fn) {
    //   arr.forEach(() => {
    //     let res = fn(element);
    //     if(obj[res] !== undefined) {
    //       obj[res] ++
    //     } else {
    //       obj[res] = 1;
    //     }
    //   });
    //   return obj;
    // }
    // let num = myCountBy([2.6, 4.3, 7, 2.1, 4, 8, 1, 2])
    // console.log(num)

    let num = myCountBy1([5.4, 5.6, 5.1, 7], Math.floor)
    function myCountBy1(arr, func) {
      return arr.reduct((pre, next) => {
        //如果有第二个参数 pre === 第二个参数
        let res = func(next);
        //第二次以后的循环 pre 是上一次的返回值
        if(pre[res] !==undefined) {
          return pre[res] ++
        } else {
          pre[res] = 1;
        }
        return pre
      }, {})
    }

    // function myCountBy3(arr) {
    //   let obj = {}
    //   arr.map((item) => {
    //     let key = Math.floor(item)
    //     if (!obj[key]) {
    //       obj[key] = 1
    //     }
    //     else {
    //       obj[key]++
    //     }
    //   })

    //   return obj
    // }
    // let num = myCountBy3([2.6, 4.3, 7, 2.1, 4, 8, 1, 2])
    // console.log(num)

    // function myCountBy4(arr) {
    //   let obj = {}
    //   arr.forEach(function (item) {
    //     let x = Math.floor(item)
    //     //  如果没现过
    //     if (!obj[x]) {
    //       obj[x] = 1;
    //     } else { //出现过
    //       obj[x]++
    //     }
    //   });
    //   return obj
    // }
    // console.log(myCountBy4([5.4, 5.6, 5.1, 7]))

  </script>

</body>

</html>